{"version":3,"file":"script.js","sources":["../src/settings.ts","../src/video.ts","../src/background.ts","../src/greeting.ts","../src/clock.ts","../src/search.ts","../src/quotes.ts","../src/weather.ts","../src/quickLinks.ts","../src/toast.ts","../src/settingsPanel.ts","../src/keyboard.ts","../src/main.ts"],"sourcesContent":["import type { Settings } from \"./types\";\r\n\r\nconst STORAGE_KEY = \"zetonicSettings\";\r\n\r\nconst defaults: Settings = {\r\n  showClock: true,\r\n  showQuote: true,\r\n  showWeather: true,\r\n  format24: true,\r\n  localVideosOnly: false,\r\n  focusMode: false,\r\n  zenMode: false,\r\n  searchEngine: \"google\",\r\n  bgMode: \"video\",\r\n  imageSource: \"curated\",\r\n  customBgUrl: \"\",\r\n  imageRotation: 10,\r\n  blurLevel: 0,\r\n  theme: \"default\",\r\n  userName: \"\",\r\n  dailyFocus: \"\",\r\n  showQuickLinks: true,\r\n};\r\n\r\nlet settings: Settings = { ...defaults };\r\n\r\nexport function getSettings(): Settings {\r\n  return { ...settings };\r\n}\r\n\r\nexport function loadSettings(): void {\r\n  try {\r\n    const saved = localStorage.getItem(STORAGE_KEY);\r\n    if (saved) {\r\n      const parsed = JSON.parse(saved) as Partial<Settings>;\r\n      settings = { ...defaults, ...parsed };\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error loading settings:\", error);\r\n  }\r\n}\r\n\r\nexport function saveSettings(updates: Partial<Settings>): void {\r\n  try {\r\n    settings = { ...settings, ...updates };\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(settings));\r\n  } catch (error) {\r\n    console.error(\"Error saving settings:\", error);\r\n  }\r\n}\r\n","import type { VideoSource, LocalVideoData, StoredLocalVideo } from \"./types\";\r\n\r\nconst REMOTE_VIDEOS_URL =\r\n  \"https://raw.githubusercontent.com/ash-kernel/Zetonic/main/sup/videos.json\";\r\nconst DB_NAME = \"ZetonicVideoDB\";\r\nconst DB_VERSION = 1;\r\nconst STORE_NAME = \"localVideos\";\r\n\r\nlet videos: VideoSource[] = [];\r\nlet currentIndex = 0;\r\n\r\nexport function getVideos(): VideoSource[] {\r\n  return videos;\r\n}\r\n\r\nexport function getCurrentIndex(): number {\r\n  return currentIndex;\r\n}\r\n\r\nexport function setVideos(list: VideoSource[]): void {\r\n  videos = list;\r\n}\r\n\r\nexport function setCurrentIndex(index: number): void {\r\n  currentIndex = index;\r\n}\r\n\r\nexport function getVideoUrl(videoData: VideoSource): string {\r\n  if (typeof videoData === \"string\") return videoData;\r\n  return (videoData as LocalVideoData).url;\r\n}\r\n\r\nexport async function loadVideos(videoEl: HTMLVideoElement): Promise<void> {\r\n  const localOnly = (() => {\r\n    try {\r\n      const s = localStorage.getItem(\"zetonicSettings\");\r\n      return s ? (JSON.parse(s) as { localVideosOnly?: boolean }).localVideosOnly : false;\r\n    } catch {\r\n      return false;\r\n    }\r\n  })();\r\n\r\n  if (localOnly) {\r\n    const userVideos = getUserVideos();\r\n    const localVideos = await getLocalVideos();\r\n    videos = [...userVideos, ...localVideos];\r\n    if (videos.length > 0) {\r\n      currentIndex = Math.floor(Math.random() * videos.length);\r\n      await playVideo(videoEl, currentIndex);\r\n    }\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const response = await fetch(REMOTE_VIDEOS_URL);\r\n    if (!response.ok) throw new Error(\"Failed to fetch videos\");\r\n\r\n    const data = await response.json();\r\n    if (!Array.isArray(data) || data.length === 0) {\r\n      throw new Error(\"Invalid video data\");\r\n    }\r\n\r\n    videos = [...data];\r\n    const userVideos = getUserVideos();\r\n    if (userVideos.length > 0) videos = [...videos, ...userVideos];\r\n\r\n    const localVideos = await getLocalVideos();\r\n    if (localVideos.length > 0) videos = [...videos, ...localVideos];\r\n\r\n    currentIndex = Math.floor(Math.random() * videos.length);\r\n    await playVideo(videoEl, currentIndex);\r\n  } catch (error) {\r\n    console.error(\"Video loading error:\", error);\r\n    const userVideos = getUserVideos();\r\n    const localVideos = await getLocalVideos();\r\n    videos = [...userVideos, ...localVideos];\r\n    if (videos.length > 0) {\r\n      currentIndex = 0;\r\n      await playVideo(videoEl, currentIndex);\r\n    }\r\n  }\r\n}\r\n\r\nexport async function playVideo(\r\n  videoEl: HTMLVideoElement,\r\n  index: number\r\n): Promise<void> {\r\n  try {\r\n    const videoData = videos[index];\r\n    videoEl.src = getVideoUrl(videoData);\r\n    await videoEl.play();\r\n  } catch (error) {\r\n    console.error(\"Video playback error:\", error);\r\n  }\r\n}\r\n\r\nexport function getUserVideos(): string[] {\r\n  try {\r\n    const stored = localStorage.getItem(\"zetonicUserVideos\");\r\n    if (!stored) return [];\r\n    const parsed = JSON.parse(stored) as unknown;\r\n    return Array.isArray(parsed) ? parsed : [];\r\n  } catch (error) {\r\n    console.error(\"Error loading user videos:\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport function saveUserVideos(videoList: string[]): void {\r\n  try {\r\n    localStorage.setItem(\"zetonicUserVideos\", JSON.stringify(videoList));\r\n  } catch (error) {\r\n    console.error(\"Error saving user videos:\", error);\r\n  }\r\n}\r\n\r\nexport interface AddVideoResult {\r\n  success: boolean;\r\n  message: string;\r\n}\r\n\r\nexport function addUserVideo(url: string): AddVideoResult {\r\n  if (!isValidVideoUrl(url)) {\r\n    return { success: false, message: \"Invalid video URL\" };\r\n  }\r\n  const userVideos = getUserVideos();\r\n  if (userVideos.includes(url)) {\r\n    return { success: false, message: \"Video already exists\" };\r\n  }\r\n  userVideos.push(url);\r\n  saveUserVideos(userVideos);\r\n  videos.push(url);\r\n  return { success: true, message: \"Video added successfully!\" };\r\n}\r\n\r\nexport function removeUserVideo(\r\n  url: string,\r\n  onReload: () => void\r\n): void {\r\n  const filtered = getUserVideos().filter((v) => v !== url);\r\n  saveUserVideos(filtered);\r\n  onReload();\r\n}\r\n\r\nexport function isValidVideoUrl(url: string): boolean {\r\n  try {\r\n    const parsed = new URL(url);\r\n    const validExtensions = [\".mp4\", \".webm\", \".ogg\", \".mov\"];\r\n    const hasValidExtension = validExtensions.some((ext) =>\r\n      parsed.pathname.toLowerCase().endsWith(ext)\r\n    );\r\n    const validHosts = [\r\n      \"pexels.com\",\r\n      \"pixabay.com\",\r\n      \"catbox.moe\",\r\n      \"youtube.com\",\r\n      \"vimeo.com\",\r\n    ];\r\n    const isKnownHost = validHosts.some((host) =>\r\n      parsed.hostname.includes(host)\r\n    );\r\n    return (\r\n      (parsed.protocol === \"http:\" || parsed.protocol === \"https:\") &&\r\n      (hasValidExtension || isKnownHost)\r\n    );\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction openDB(): Promise<IDBDatabase> {\r\n  return new Promise((resolve, reject) => {\r\n    const request = indexedDB.open(DB_NAME, DB_VERSION);\r\n    request.onerror = () => reject(request.error);\r\n    request.onsuccess = () => resolve(request.result);\r\n    request.onupgradeneeded = (event) => {\r\n      const db = (event.target as IDBOpenDBRequest).result;\r\n      if (!db.objectStoreNames.contains(STORE_NAME)) {\r\n        db.createObjectStore(STORE_NAME, {\r\n          keyPath: \"id\",\r\n          autoIncrement: true,\r\n        });\r\n      }\r\n    };\r\n  });\r\n}\r\n\r\nexport async function saveLocalVideo(file: File): Promise<number> {\r\n  const db = await openDB();\r\n  const transaction = db.transaction([STORE_NAME], \"readwrite\");\r\n  const store = transaction.objectStore(STORE_NAME);\r\n  const videoData: Omit<StoredLocalVideo, \"id\"> = {\r\n    name: file.name,\r\n    type: file.type,\r\n    size: file.size,\r\n    blob: file,\r\n    addedAt: Date.now(),\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    const request = store.add(videoData);\r\n    request.onsuccess = () => resolve(request.result as number);\r\n    request.onerror = () => reject(request.error);\r\n  });\r\n}\r\n\r\nexport async function getLocalVideos(): Promise<LocalVideoData[]> {\r\n  try {\r\n    const db = await openDB();\r\n    const transaction = db.transaction([STORE_NAME], \"readonly\");\r\n    const store = transaction.objectStore(STORE_NAME);\r\n    return new Promise((resolve, reject) => {\r\n      const request = store.getAll();\r\n      request.onsuccess = () => {\r\n        const results = request.result as StoredLocalVideo[];\r\n        const items = results.map((video) => ({\r\n          id: video.id,\r\n          name: video.name,\r\n          url: URL.createObjectURL(video.blob),\r\n          isLocal: true as const,\r\n        }));\r\n        resolve(items);\r\n      };\r\n      request.onerror = () => reject(request.error);\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Error loading local videos:\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function removeLocalVideo(id: number): Promise<void> {\r\n  const db = await openDB();\r\n  const transaction = db.transaction([STORE_NAME], \"readwrite\");\r\n  const store = transaction.objectStore(STORE_NAME);\r\n  return new Promise((resolve, reject) => {\r\n    const request = store.delete(id);\r\n    request.onsuccess = () => resolve();\r\n    request.onerror = () => reject(request.error);\r\n  });\r\n}\r\n","import type { Settings } from \"./types\";\r\n\r\nconst WALLPAPERS_URL =\r\n  \"https://raw.githubusercontent.com/ash-kernel/Zetonic/main/sup/wallpapers.json\";\r\nconst PICSUM = (s: string) => `https://picsum.photos/seed/${s}/1920/1080`;\r\n\r\nconst FALLBACK_WALLPAPERS = [\r\n  PICSUM(\"city\"), PICSUM(\"night\"), PICSUM(\"nature\"),\r\n  PICSUM(\"sky\"), PICSUM(\"ocean\"), PICSUM(\"mountain\"),\r\n];\r\n\r\nlet wallpapers: string[] = [...FALLBACK_WALLPAPERS];\r\nlet currentImageIndex = 0;\r\n\r\nexport async function loadWallpapers(): Promise<string[]> {\r\n  try {\r\n    const r = await fetch(WALLPAPERS_URL);\r\n    if (r.ok) {\r\n      const data = await r.json();\r\n      if (Array.isArray(data) && data.length > 0) wallpapers = data;\r\n    }\r\n  } catch {}\r\n  return wallpapers;\r\n}\r\n\r\nfunction getSettings(): Partial<Settings> {\r\n  try {\r\n    const s = localStorage.getItem(\"zetonicSettings\");\r\n    return s ? (JSON.parse(s) as Partial<Settings>) : {};\r\n  } catch {\r\n    return {};\r\n  }\r\n}\r\n\r\nexport function getRandomImageUrl(): string {\r\n  const { imageSource = \"curated\", customBgUrl = \"\" } = getSettings();\r\n  if (imageSource === \"custom\" && customBgUrl) return customBgUrl;\r\n  if (imageSource === \"picsum\") return PICSUM(`r${Math.floor(Math.random() * 9999)}`);\r\n  const idx = Math.floor(Math.random() * wallpapers.length);\r\n  currentImageIndex = idx;\r\n  return wallpapers[idx];\r\n}\r\n\r\nexport function getNextImageUrl(): string {\r\n  const { imageSource = \"curated\", customBgUrl = \"\" } = getSettings();\r\n  if (imageSource === \"picsum\") return PICSUM(`n${Date.now() % 99999}`);\r\n  if (imageSource === \"custom\" && customBgUrl) return customBgUrl;\r\n  currentImageIndex = (currentImageIndex + 1) % wallpapers.length;\r\n  return wallpapers[currentImageIndex];\r\n}\r\n\r\nexport function setBackgroundImage(\r\n  el: HTMLDivElement | null,\r\n  url: string,\r\n  blur = 0\r\n): void {\r\n  if (!el) return;\r\n  el.style.backgroundImage = `url(${url})`;\r\n  el.style.filter = blur ? `blur(${blur}px)` : \"none\";\r\n  el.classList.add(\"bg-loaded\");\r\n}\r\n\r\nexport async function initImageBackground(\r\n  bgEl: HTMLElement | null,\r\n  rotationMinutes: number\r\n): Promise<void> {\r\n  if (!bgEl) return;\r\n  await loadWallpapers();\r\n  const url = getRandomImageUrl();\r\n  const { blurLevel = 0 } = getSettings();\r\n  setBackgroundImage(bgEl as HTMLDivElement, url, blurLevel);\r\n\r\n  if (rotationMinutes > 0) {\r\n    setInterval(() => {\r\n      const next = getNextImageUrl();\r\n      bgEl.style.opacity = \"0\";\r\n      setTimeout(() => {\r\n        setBackgroundImage(bgEl as HTMLDivElement, next, getSettings().blurLevel ?? 0);\r\n        bgEl.style.opacity = \"1\";\r\n      }, 400);\r\n    }, rotationMinutes * 60 * 1000);\r\n  }\r\n}\r\n","export function getGreeting(): string {\r\n  const hour = new Date().getHours();\r\n  let time = \"Good evening\";\r\n  if (hour < 12) time = \"Good morning\";\r\n  else if (hour < 17) time = \"Good afternoon\";\r\n\r\n  const name = (() => {\r\n    try {\r\n      const s = localStorage.getItem(\"zetonicSettings\");\r\n      const parsed = s ? (JSON.parse(s) as { userName?: string }) : {};\r\n      return String(parsed.userName || \"\").trim();\r\n    } catch {\r\n      return \"\";\r\n    }\r\n  })();\r\n\r\n  return name ? `${time}, ${name}` : time;\r\n}\r\n","import { getSettings } from \"./settings\";\r\nimport { getGreeting } from \"./greeting\";\r\n\r\nexport function updateTime(\r\n  timeEl: HTMLElement | null,\r\n  dateEl: HTMLElement | null,\r\n  greetingEl?: HTMLElement | null\r\n): void {\r\n  if (!timeEl || !dateEl) return;\r\n\r\n  const settings = getSettings();\r\n  if (!settings.showClock) {\r\n    timeEl.style.display = \"none\";\r\n    dateEl.style.display = \"none\";\r\n    if (greetingEl) greetingEl.style.display = \"none\";\r\n    return;\r\n  }\r\n\r\n  timeEl.style.display = \"block\";\r\n  dateEl.style.display = \"block\";\r\n  if (greetingEl) {\r\n    greetingEl.style.display = \"block\";\r\n    greetingEl.textContent = getGreeting();\r\n  }\r\n\r\n  const now = new Date();\r\n  let hours = now.getHours();\r\n  let suffix = \"\";\r\n\r\n  if (!settings.format24) {\r\n    suffix = hours >= 12 ? \" PM\" : \" AM\";\r\n    hours = hours % 12 || 12;\r\n  }\r\n\r\n  const minutes = now.getMinutes().toString().padStart(2, \"0\");\r\n  const seconds = now.getSeconds().toString().padStart(2, \"0\");\r\n\r\n  timeEl.textContent = `${hours.toString().padStart(2, \"0\")}:${minutes}:${seconds}${suffix}`;\r\n\r\n  dateEl.textContent = now.toLocaleDateString(undefined, {\r\n    weekday: \"long\",\r\n    month: \"long\",\r\n    day: \"numeric\",\r\n    year: \"numeric\",\r\n  });\r\n}\r\n\r\nexport function startClock(\r\n  timeEl: HTMLElement | null,\r\n  dateEl: HTMLElement | null\r\n): () => void {\r\n  updateTime(timeEl, dateEl);\r\n  const interval = setInterval(() => updateTime(timeEl, dateEl), 1000);\r\n  return () => clearInterval(interval);\r\n}\r\n","import { getSettings } from \"./settings\";\r\n\r\nconst SEARCH_URLS: Record<string, (q: string) => string> = {\r\n  google: (q) => `https://www.google.com/search?q=${encodeURIComponent(q)}`,\r\n  duckduckgo: (q) =>\r\n    `https://duckduckgo.com/?q=${encodeURIComponent(q)}`,\r\n};\r\n\r\nexport function initSearch(\r\n  searchInput: HTMLInputElement | null,\r\n  searchLogo: HTMLElement | null\r\n): void {\r\n  if (!searchInput) return;\r\n\r\n  searchInput.addEventListener(\"keydown\", (e) => {\r\n    if (e.key === \"Enter\") {\r\n      const query = searchInput.value.trim();\r\n      if (query) {\r\n        const engine = getSettings().searchEngine;\r\n        const url = SEARCH_URLS[engine]?.(query) ?? SEARCH_URLS.google(query);\r\n        window.location.href = url;\r\n      }\r\n    }\r\n  });\r\n\r\n  if (searchLogo) {\r\n    searchInput.addEventListener(\"focus\", () => {\r\n      searchLogo.style.transform = \"scale(1.1)\";\r\n    });\r\n    searchInput.addEventListener(\"blur\", () => {\r\n      searchLogo.style.transform = \"scale(1)\";\r\n    });\r\n  }\r\n\r\n  document.addEventListener(\"keydown\", (e) => {\r\n    if (e.key === \"/\" && ![\"INPUT\", \"TEXTAREA\"].includes((e.target as HTMLElement)?.tagName)) {\r\n      e.preventDefault();\r\n      searchInput.focus();\r\n    }\r\n  });\r\n}\r\n","import { getSettings } from \"./settings\";\r\n\r\nconst FALLBACK_QUOTES = [\r\n  \"The journey of a thousand miles begins with one step.\",\r\n  \"Dream big and dare to fail.\",\r\n  \"Stay focused and never give up.\",\r\n  \"Simplicity is the ultimate sophistication.\",\r\n  \"Believe you can and you're halfway there.\",\r\n  \"The only way to do great work is to love what you do.\",\r\n  \"Success is not final, failure is not fatal.\",\r\n  \"Every moment is a fresh beginning.\",\r\n];\r\n\r\nexport async function loadQuote(quoteEl: HTMLElement | null): Promise<void> {\r\n  if (!quoteEl) return;\r\n\r\n  const settings = getSettings();\r\n  if (!settings.showQuote) {\r\n    quoteEl.style.display = \"none\";\r\n    return;\r\n  }\r\n\r\n  quoteEl.style.display = \"block\";\r\n\r\n  try {\r\n    const response = await fetch(\"https://api.adviceslip.com/advice\");\r\n    if (!response.ok) throw new Error(\"API request failed\");\r\n\r\n    const data = (await response.json()) as { slip: { advice: string } };\r\n    quoteEl.textContent = `\"${data.slip.advice}\"`;\r\n  } catch (error) {\r\n    const randomQuote =\r\n      FALLBACK_QUOTES[Math.floor(Math.random() * FALLBACK_QUOTES.length)];\r\n    quoteEl.textContent = `\"${randomQuote}\"`;\r\n  }\r\n}\r\n","import type { WeatherData, WeatherCache } from \"./types\";\r\nimport { getSettings } from \"./settings\";\r\n\r\nconst CACHE_KEY = \"zetonicWeatherCache\";\r\nconst CACHE_DURATION = 30 * 60 * 1000;\r\n\r\nconst WEATHER_ICONS: Record<string, string> = {\r\n  Clear: \"‚òÄÔ∏è\",\r\n  Clouds: \"‚õÖ\",\r\n  Rain: \"üåßÔ∏è\",\r\n  Drizzle: \"üå¶Ô∏è\",\r\n  Thunderstorm: \"‚õàÔ∏è\",\r\n  Snow: \"‚ùÑÔ∏è\",\r\n  Mist: \"üå´Ô∏è\",\r\n  Fog: \"üå´Ô∏è\",\r\n  Haze: \"üå´Ô∏è\",\r\n};\r\n\r\nconst NIGHT_OVERRIDES: Record<string, string> = {\r\n  Clear: \"üåô\",\r\n  Clouds: \"‚òÅÔ∏è\",\r\n};\r\n\r\nexport function getWeatherIcon(condition: string, isDay = true): string {\r\n  if (!isDay && NIGHT_OVERRIDES[condition]) {\r\n    return NIGHT_OVERRIDES[condition];\r\n  }\r\n  return WEATHER_ICONS[condition] ?? \"üå§Ô∏è\";\r\n}\r\n\r\nfunction getWeatherCondition(code: number): string {\r\n  if (code === 0) return \"Clear\";\r\n  if (code <= 3) return \"Clouds\";\r\n  if (code <= 49) return \"Fog\";\r\n  if (code <= 69) return \"Rain\";\r\n  if (code <= 79) return \"Snow\";\r\n  if (code <= 99) return \"Thunderstorm\";\r\n  return \"Clear\";\r\n}\r\n\r\nexport function updateWeatherUI(\r\n  data: WeatherData,\r\n  elements: {\r\n    icon: HTMLElement | null;\r\n    temp: HTMLElement | null;\r\n    desc: HTMLElement | null;\r\n    location: HTMLElement | null;\r\n  }\r\n): void {\r\n  const { icon, temp, desc, location } = elements;\r\n  if (icon) icon.textContent = getWeatherIcon(data.condition, data.isDay);\r\n  if (temp) temp.textContent = `${data.temp}¬∞C`;\r\n  if (desc) desc.textContent = data.condition;\r\n  if (location) location.textContent = `üìç ${data.location}`;\r\n}\r\n\r\nexport function showWeatherError(elements: {\r\n  icon: HTMLElement | null;\r\n  temp: HTMLElement | null;\r\n  desc: HTMLElement | null;\r\n  location: HTMLElement | null;\r\n}): void {\r\n  const { icon, temp, desc, location } = elements;\r\n  if (icon) icon.textContent = \"üå°Ô∏è\";\r\n  if (temp) temp.textContent = \"--¬∞\";\r\n  if (desc) desc.textContent = \"Location unavailable\";\r\n  if (location) location.textContent = \"üìç Enable location access\";\r\n}\r\n\r\nexport async function loadWeather(\r\n  elements: {\r\n    widget: HTMLElement | null;\r\n    icon: HTMLElement | null;\r\n    temp: HTMLElement | null;\r\n    desc: HTMLElement | null;\r\n    location: HTMLElement | null;\r\n  }\r\n): Promise<void> {\r\n  const { widget, icon, temp, desc, location } = elements;\r\n\r\n  if (!widget) return;\r\n  const settings = getSettings();\r\n  if (!settings.showWeather) {\r\n    widget.style.display = \"none\";\r\n    return;\r\n  }\r\n\r\n  widget.style.display = \"flex\";\r\n\r\n  try {\r\n    const cached = localStorage.getItem(CACHE_KEY);\r\n    if (cached) {\r\n      const data = JSON.parse(cached) as WeatherCache;\r\n      if (Date.now() - data.timestamp < CACHE_DURATION) {\r\n        updateWeatherUI(data.weather, { icon, temp, desc, location });\r\n        return;\r\n      }\r\n    }\r\n  } catch {}\r\n\r\n  if (!navigator.geolocation) {\r\n    showWeatherError({ icon, temp, desc, location });\r\n    return;\r\n  }\r\n\r\n  navigator.geolocation.getCurrentPosition(\r\n    async (position) => {\r\n      try {\r\n        const { latitude, longitude } = position.coords;\r\n        const url = `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current=temperature_2m,weathercode,is_day&timezone=auto`;\r\n\r\n        const response = await fetch(url);\r\n        if (!response.ok) throw new Error(\"Weather API failed\");\r\n\r\n        const data = (await response.json()) as {\r\n          current: { temperature_2m: number; weathercode: number; is_day: number };\r\n        };\r\n\r\n        const geoUrl = `https://nominatim.openstreetmap.org/reverse?lat=${latitude}&lon=${longitude}&format=json`;\r\n        const geoResponse = await fetch(geoUrl);\r\n        const geoData = (await geoResponse.json()) as {\r\n          address?: { city?: string; town?: string; village?: string };\r\n        };\r\n\r\n        const addr = geoData.address ?? {};\r\n        const locationName =\r\n          addr.city ?? addr.town ?? addr.village ?? \"Unknown\";\r\n\r\n        const weatherData: WeatherData = {\r\n          temp: Math.round(data.current.temperature_2m),\r\n          condition: getWeatherCondition(data.current.weathercode),\r\n          location: locationName,\r\n          isDay: data.current.is_day === 1,\r\n        };\r\n\r\n        const cache: WeatherCache = {\r\n          weather: weatherData,\r\n          timestamp: Date.now(),\r\n        };\r\n        localStorage.setItem(CACHE_KEY, JSON.stringify(cache));\r\n\r\n        updateWeatherUI(weatherData, { icon, temp, desc, location });\r\n      } catch (error) {\r\n        console.error(\"Weather fetch error:\", error);\r\n        showWeatherError({ icon, temp, desc, location });\r\n      }\r\n    },\r\n    () => {\r\n      showWeatherError({ icon, temp, desc, location });\r\n    }\r\n  );\r\n}\r\n","export interface QuickLink {\r\n  name: string;\r\n  url: string;\r\n}\r\n\r\nconst KEY = \"zetonicQuickLinks\";\r\nconst DEFAULT_LINKS: QuickLink[] = [\r\n  { name: \"Gmail\", url: \"https://mail.google.com\" },\r\n  { name: \"YouTube\", url: \"https://youtube.com\" },\r\n  { name: \"GitHub\", url: \"https://github.com\" },\r\n  { name: \"Reddit\", url: \"https://reddit.com\" },\r\n  { name: \"Twitter\", url: \"https://x.com\" },\r\n  { name: \"ChatGPT\", url: \"https://chat.openai.com\" },\r\n];\r\n\r\nexport function getQuickLinks(): QuickLink[] {\r\n  try {\r\n    const s = localStorage.getItem(KEY);\r\n    if (!s) return [...DEFAULT_LINKS];\r\n    const parsed = JSON.parse(s) as QuickLink[];\r\n    if (!Array.isArray(parsed)) return [...DEFAULT_LINKS];\r\n    return parsed.map((l) => ({\r\n      name: String(l.name || \"Link\").slice(0, 20),\r\n      url: String(l.url || \"#\").slice(0, 500),\r\n    }));\r\n  } catch {\r\n    return [...DEFAULT_LINKS];\r\n  }\r\n}\r\n\r\nexport function saveQuickLinks(links: QuickLink[]): void {\r\n  try {\r\n    localStorage.setItem(\r\n      KEY,\r\n      JSON.stringify(links.slice(0, 12).map((l) => ({\r\n        name: String(l.name || \"\").slice(0, 20),\r\n        url: String(l.url || \"\").slice(0, 500),\r\n      })))\r\n    );\r\n  } catch {}\r\n}\r\n","let toastContainer: HTMLElement | null = null;\r\n\r\nfunction ensureContainer(): HTMLElement {\r\n  if (!toastContainer) {\r\n    toastContainer = document.createElement(\"div\");\r\n    toastContainer.id = \"toastContainer\";\r\n    document.body.appendChild(toastContainer);\r\n  }\r\n  return toastContainer;\r\n}\r\n\r\nexport function showToast(message: string, type: \"success\" | \"error\" = \"success\"): void {\r\n  const container = ensureContainer();\r\n  const toast = document.createElement(\"div\");\r\n  toast.className = `toast toast-${type}`;\r\n  toast.textContent = message;\r\n  container.appendChild(toast);\r\n\r\n  requestAnimationFrame(() => toast.classList.add(\"toast-visible\"));\r\n  setTimeout(() => {\r\n    toast.classList.remove(\"toast-visible\");\r\n    setTimeout(() => toast.remove(), 200);\r\n  }, 2500);\r\n}\r\n","import type { Settings } from \"./types\";\r\nimport { getSettings, saveSettings } from \"./settings\";\r\nimport {\r\n  addUserVideo,\r\n  removeUserVideo,\r\n  removeLocalVideo,\r\n  getUserVideos,\r\n  getLocalVideos,\r\n} from \"./video\";\r\nimport { getQuickLinks, saveQuickLinks } from \"./quickLinks\";\r\nimport { showToast } from \"./toast\";\r\nimport { initImageBackground, getRandomImageUrl, setBackgroundImage, loadWallpapers } from \"./background\";\r\n\r\nfunction truncate(s: string, max = 32): string {\r\n  return s.length <= max ? s : s.slice(0, max) + \"‚Ä¶\";\r\n}\r\n\r\nexport async function displayUserVideos(\r\n  listEl: HTMLElement | null,\r\n  onReload: () => void\r\n): Promise<void> {\r\n  if (!listEl) return;\r\n\r\n  const userVideos = getUserVideos();\r\n  const localVideos = await getLocalVideos();\r\n\r\n  if (!userVideos.length && !localVideos.length) {\r\n    listEl.innerHTML = '<p class=\"no-videos\">No videos yet</p>';\r\n    return;\r\n  }\r\n\r\n  let html = \"\";\r\n  if (userVideos.length) {\r\n    html += '<div class=\"video-category\">URL</div>';\r\n    html += userVideos\r\n      .map(\r\n        (url) => `\r\n      <div class=\"video-item\">\r\n        <span class=\"video-url\" title=\"${url.replace(/\"/g, \"&quot;\")}\">${truncate(url)}</span>\r\n        <button class=\"remove-btn\" data-url=\"${url.replace(/\"/g, \"&quot;\")}\" data-type=\"url\">√ó</button>\r\n      </div>\r\n    `\r\n      )\r\n      .join(\"\");\r\n  }\r\n  if (localVideos.length) {\r\n    html += '<div class=\"video-category\">Local</div>';\r\n    html += localVideos\r\n      .map(\r\n        (v) => `\r\n      <div class=\"video-item\">\r\n        <span class=\"video-url\" title=\"${v.name.replace(/\"/g, \"&quot;\")}\">${truncate(v.name, 24)}</span>\r\n        <button class=\"remove-btn\" data-id=\"${v.id}\" data-type=\"local\">√ó</button>\r\n      </div>\r\n    `\r\n      )\r\n      .join(\"\");\r\n  }\r\n\r\n  listEl.innerHTML = html;\r\n\r\n  listEl.querySelectorAll(\".remove-btn\").forEach((btn) => {\r\n    btn.addEventListener(\"click\", async (e) => {\r\n      const target = e.currentTarget as HTMLButtonElement;\r\n      const type = target.getAttribute(\"data-type\");\r\n      if (!confirm(\"Remove this video?\")) return;\r\n\r\n      try {\r\n        if (type === \"url\") {\r\n          const url = target.getAttribute(\"data-url\");\r\n          if (url) removeUserVideo(url, onReload);\r\n        } else if (type === \"local\") {\r\n          const id = parseInt(target.getAttribute(\"data-id\") ?? \"0\", 10);\r\n          await removeLocalVideo(id);\r\n          await onReload();\r\n        }\r\n        await displayUserVideos(listEl, onReload);\r\n        showToast(\"Removed\", \"success\");\r\n      } catch {\r\n        showToast(\"Failed to remove\", \"error\");\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nfunction initCollapsible(panel: HTMLElement): void {\r\n  panel.querySelectorAll(\".section-toggle\").forEach((btn) => {\r\n    btn.addEventListener(\"click\", () => {\r\n      const section = (btn as HTMLElement).closest(\".settings-section\");\r\n      if (!section) return;\r\n      const collapsed = section.getAttribute(\"data-collapsed\") === \"true\";\r\n      section.setAttribute(\"data-collapsed\", String(!collapsed));\r\n      btn.setAttribute(\"aria-expanded\", String(collapsed));\r\n    });\r\n  });\r\n}\r\n\r\nfunction renderQuickLinksEditor(container: HTMLElement | null, onUpdate: () => void): void {\r\n  if (!container) return;\r\n  let links = getQuickLinks();\r\n  while (links.length < 6) links.push({ name: \"\", url: \"\" });\r\n  links = links.slice(0, 6);\r\n  container.innerHTML = links\r\n    .map(\r\n      (l, i) => `\r\n    <div class=\"quick-link-edit\">\r\n      <input type=\"text\" data-i=\"${i}\" data-field=\"name\" value=\"${(l.name || \"\").replace(/\"/g, \"&quot;\")}\" placeholder=\"Name\">\r\n      <input type=\"text\" data-i=\"${i}\" data-field=\"url\" value=\"${(l.url || \"\").replace(/\"/g, \"&quot;\")}\" placeholder=\"URL\">\r\n    </div>\r\n  `\r\n    )\r\n    .join(\"\");\r\n\r\n  container.querySelectorAll(\"input\").forEach((input) => {\r\n    input.addEventListener(\"change\", () => {\r\n      const i = parseInt(input.getAttribute(\"data-i\") ?? \"0\", 10);\r\n      const field = input.getAttribute(\"data-field\") as \"name\" | \"url\";\r\n      const arr = getQuickLinks();\r\n      while (arr.length <= i) arr.push({ name: \"\", url: \"\" });\r\n      arr[i] = arr[i] || { name: \"\", url: \"\" };\r\n      arr[i][field] = (input as HTMLInputElement).value.trim();\r\n      saveQuickLinks(arr);\r\n      onUpdate();\r\n    });\r\n  });\r\n}\r\n\r\nexport function initSettingsPanel(\r\n  elements: Record<string, HTMLElement | HTMLInputElement | HTMLSelectElement | null>,\r\n  callbacks: Record<string, () => void>\r\n): void {\r\n  const s = getSettings();\r\n  const set = (el: HTMLInputElement | HTMLSelectElement | null, val: unknown) => {\r\n    if (!el) return;\r\n    if (el instanceof HTMLInputElement) {\r\n      if (el.type === \"checkbox\") el.checked = !!val;\r\n      else if (el.type === \"range\" || el.type === \"number\") el.value = String(val ?? 0);\r\n      else el.value = String(val ?? \"\");\r\n    } else {\r\n      (el as HTMLSelectElement).value = String(val ?? \"\");\r\n    }\r\n  };\r\n\r\n  set(elements.toggleClock as HTMLInputElement, s.showClock);\r\n  set(elements.toggleQuote as HTMLInputElement, s.showQuote);\r\n  set(elements.toggleWeather as HTMLInputElement, s.showWeather);\r\n  set(elements.toggleQuickLinks as HTMLInputElement, s.showQuickLinks);\r\n  set(elements.toggleFocus as HTMLInputElement, s.focusMode);\r\n  set(elements.toggleZen as HTMLInputElement, s.zenMode);\r\n  set(elements.toggleLocalOnly as HTMLInputElement, s.localVideosOnly);\r\n  set(elements.timeFormat as HTMLSelectElement, s.format24 ? \"24\" : \"12\");\r\n  set(elements.theme as HTMLSelectElement, s.theme);\r\n  set(elements.searchEngine as HTMLSelectElement, s.searchEngine);\r\n  set(elements.bgMode as HTMLSelectElement, s.bgMode);\r\n  set(elements.imageSource as HTMLSelectElement, s.imageSource);\r\n  set(elements.customBgUrl as HTMLInputElement, s.customBgUrl);\r\n  set(elements.imageRotation as HTMLInputElement, s.imageRotation ?? 0);\r\n  set(elements.blurLevel as HTMLInputElement, s.blurLevel ?? 0);\r\n  set(elements.userName as HTMLInputElement, s.userName);\r\n  set(elements.dailyFocus as HTMLInputElement, s.dailyFocus);\r\n\r\n  const settingsPanel = elements.settingsPanel as HTMLElement;\r\n  if (settingsPanel) initCollapsible(settingsPanel);\r\n\r\n  const open = () => {\r\n    settingsPanel?.setAttribute(\"data-open\", \"true\");\r\n    callbacks.onDisplayVideos?.();\r\n    renderQuickLinksEditor(elements.quickLinksEditor as HTMLElement, callbacks.onQuickLinksChange!);\r\n  };\r\n  const close = () => settingsPanel?.removeAttribute(\"data-open\");\r\n\r\n  elements.settingsBtn?.addEventListener(\"click\", () => {\r\n    if (settingsPanel?.getAttribute(\"data-open\") === \"true\") close();\r\n    else open();\r\n  });\r\n  elements.closeSettings?.addEventListener(\"click\", close);\r\n\r\n  document.addEventListener(\"click\", (e) => {\r\n    if (\r\n      settingsPanel &&\r\n      !settingsPanel.contains(e.target as Node) &&\r\n      e.target !== elements.settingsBtn\r\n    ) {\r\n      close();\r\n    }\r\n  });\r\n\r\n  elements.toggleClock?.addEventListener(\"change\", function (this: HTMLInputElement) {\r\n    saveSettings({ showClock: this.checked });\r\n    callbacks.onUpdateTime?.();\r\n  });\r\n  elements.toggleQuote?.addEventListener(\"change\", function (this: HTMLInputElement) {\r\n    saveSettings({ showQuote: this.checked });\r\n    callbacks.onLoadQuote?.();\r\n  });\r\n  elements.toggleWeather?.addEventListener(\"change\", function (this: HTMLInputElement) {\r\n    saveSettings({ showWeather: this.checked });\r\n    callbacks.onLoadWeather?.();\r\n  });\r\n  elements.toggleQuickLinks?.addEventListener(\"change\", function (this: HTMLInputElement) {\r\n    saveSettings({ showQuickLinks: this.checked });\r\n    callbacks.onFocusModeChange?.();\r\n  });\r\n  elements.toggleFocus?.addEventListener(\"change\", function (this: HTMLInputElement) {\r\n    saveSettings({ focusMode: this.checked });\r\n    callbacks.onFocusModeChange?.();\r\n  });\r\n  elements.toggleZen?.addEventListener(\"change\", function (this: HTMLInputElement) {\r\n    saveSettings({ zenMode: this.checked });\r\n    callbacks.onFocusModeChange?.();\r\n  });\r\n  elements.toggleLocalOnly?.addEventListener(\"change\", function (this: HTMLInputElement) {\r\n    saveSettings({ localVideosOnly: this.checked });\r\n    callbacks.onReloadVideos?.();\r\n  });\r\n  elements.timeFormat?.addEventListener(\"change\", function (this: HTMLSelectElement) {\r\n    saveSettings({ format24: this.value === \"24\" });\r\n    callbacks.onUpdateTime?.();\r\n  });\r\n  elements.theme?.addEventListener(\"change\", function (this: HTMLSelectElement) {\r\n    saveSettings({ theme: this.value as Settings[\"theme\"] });\r\n    callbacks.onThemeChange?.();\r\n  });\r\n  elements.searchEngine?.addEventListener(\"change\", function (this: HTMLSelectElement) {\r\n    saveSettings({ searchEngine: this.value as \"google\" | \"duckduckgo\" });\r\n  });\r\n  elements.bgMode?.addEventListener(\"change\", function (this: HTMLSelectElement) {\r\n    saveSettings({ bgMode: this.value as \"video\" | \"image\" });\r\n    callbacks.onBgModeChange?.();\r\n  });\r\n  elements.imageSource?.addEventListener(\"change\", function (this: HTMLSelectElement) {\r\n    saveSettings({ imageSource: this.value as \"curated\" | \"picsum\" | \"custom\" });\r\n  });\r\n  elements.customBgUrl?.addEventListener(\"change\", function (this: HTMLInputElement) {\r\n    saveSettings({ customBgUrl: this.value.trim() });\r\n  });\r\n  elements.imageRotation?.addEventListener(\"change\", function (this: HTMLInputElement) {\r\n    saveSettings({ imageRotation: Math.max(0, parseInt(this.value, 10) || 0) });\r\n  });\r\n  elements.blurLevel?.addEventListener(\"input\", function (this: HTMLInputElement) {\r\n    const v = parseInt(this.value, 10) || 0;\r\n    saveSettings({ blurLevel: v });\r\n    const bgImage = document.getElementById(\"bgImage\");\r\n    if (bgImage?.classList.contains(\"bg-loaded\")) {\r\n      const url = (bgImage.style.backgroundImage || \"\").match(/url\\([\"']?([^\"')]+)[\"']?\\)/)?.[1];\r\n      if (url) setBackgroundImage(bgImage as HTMLDivElement, url, v);\r\n    }\r\n  });\r\n  elements.userName?.addEventListener(\"change\", function (this: HTMLInputElement) {\r\n    saveSettings({ userName: this.value.trim() });\r\n    callbacks.onUpdateTime?.();\r\n  });\r\n  elements.dailyFocus?.addEventListener(\"change\", function (this: HTMLInputElement) {\r\n    saveSettings({ dailyFocus: this.value.trim() });\r\n    callbacks.onDailyFocusChange?.();\r\n  });\r\n\r\n  elements.addVideoBtn?.addEventListener(\"click\", () => {\r\n    const url = (elements.addVideoInput as HTMLInputElement)?.value.trim() ?? \"\";\r\n    if (!url) {\r\n      showToast(\"Enter a URL\", \"error\");\r\n      return;\r\n    }\r\n    const r = addUserVideo(url);\r\n    if (r.success) {\r\n      showToast(r.message, \"success\");\r\n      if (elements.addVideoInput) (elements.addVideoInput as HTMLInputElement).value = \"\";\r\n      callbacks.onDisplayVideos?.();\r\n    } else {\r\n      showToast(r.message, \"error\");\r\n    }\r\n  });\r\n\r\n  elements.addVideoInput?.addEventListener(\"keydown\", (e) => {\r\n    if ((e as KeyboardEvent).key === \"Enter\") elements.addVideoBtn?.click();\r\n  });\r\n\r\n  elements.uploadLabel?.addEventListener(\"click\", () =>\r\n    (elements.uploadVideoInput as HTMLInputElement)?.click()\r\n  );\r\n\r\n  elements.uploadVideoInput?.addEventListener(\"change\", async function (e) {\r\n    const file = (e.target as HTMLInputElement).files?.[0];\r\n    if (!file) return;\r\n    if (!file.type.startsWith(\"video/\")) {\r\n      showToast(\"Invalid file\", \"error\");\r\n      return;\r\n    }\r\n    if (file.size > 100 * 1024 * 1024) {\r\n      showToast(\"Max 100MB\", \"error\");\r\n      return;\r\n    }\r\n    try {\r\n      showToast(\"Uploading‚Ä¶\", \"success\");\r\n      const { saveLocalVideo } = await import(\"./video\");\r\n      await saveLocalVideo(file);\r\n      showToast(\"Added\", \"success\");\r\n      await callbacks.onReloadVideos?.();\r\n      callbacks.onDisplayVideos?.();\r\n      if (elements.uploadVideoInput) (elements.uploadVideoInput as HTMLInputElement).value = \"\";\r\n    } catch {\r\n      showToast(\"Upload failed\", \"error\");\r\n    }\r\n  });\r\n}\r\n","type ShortcutHandler = () => void;\r\n\r\nconst shortcuts: Array<{ key: string; ctrl?: boolean; handler: ShortcutHandler }> = [];\r\n\r\nexport function onShortcut(\r\n  key: string,\r\n  handler: ShortcutHandler,\r\n  options?: { ctrl?: boolean }\r\n): void {\r\n  shortcuts.push({\r\n    key: key.toLowerCase(),\r\n    ctrl: options?.ctrl,\r\n    handler,\r\n  });\r\n}\r\n\r\nexport function initKeyboard(): void {\r\n  document.addEventListener(\"keydown\", (e) => {\r\n    const target = e.target as HTMLElement;\r\n    if (target?.closest?.(\"input, textarea, select\") && e.key !== \"Escape\") return;\r\n\r\n    const key = e.key.toLowerCase();\r\n    const ctrl = e.ctrlKey || e.metaKey;\r\n\r\n    if (key === \"escape\") {\r\n      document.getElementById(\"settingsPanel\")?.removeAttribute(\"data-open\");\r\n      return;\r\n    }\r\n\r\n    for (const s of shortcuts) {\r\n      if (s.key === key && (s.ctrl ? ctrl : !ctrl)) {\r\n        e.preventDefault();\r\n        s.handler();\r\n        return;\r\n      }\r\n    }\r\n  });\r\n}\r\n","import { loadSettings, getSettings, saveSettings } from \"./settings\";\r\nimport {\r\n  loadVideos,\r\n  playVideo,\r\n  getVideos,\r\n  getCurrentIndex,\r\n  setCurrentIndex,\r\n} from \"./video\";\r\nimport {\r\n  getRandomImageUrl,\r\n  getNextImageUrl,\r\n  setBackgroundImage,\r\n  loadWallpapers,\r\n} from \"./background\";\r\nimport { updateTime } from \"./clock\";\r\nimport { initSearch } from \"./search\";\r\nimport { loadQuote } from \"./quotes\";\r\nimport { loadWeather } from \"./weather\";\r\nimport { initSettingsPanel, displayUserVideos } from \"./settingsPanel\";\r\nimport { getQuickLinks } from \"./quickLinks\";\r\nimport { showToast } from \"./toast\";\r\nimport { onShortcut, initKeyboard } from \"./keyboard\";\r\n\r\nconst videoEl = document.getElementById(\"bgVideo\") as HTMLVideoElement | null;\r\nconst bgImageEl = document.getElementById(\"bgImage\");\r\nconst timeEl = document.getElementById(\"time\");\r\nconst dateEl = document.getElementById(\"date\");\r\nconst greetingEl = document.getElementById(\"greeting\");\r\nconst dailyFocusEl = document.getElementById(\"dailyFocusDisplay\");\r\nconst searchInput = document.getElementById(\"searchInput\") as HTMLInputElement | null;\r\nconst searchLogo = document.getElementById(\"searchLogo\");\r\nconst quoteEl = document.getElementById(\"quote\");\r\nconst weatherWidget = document.getElementById(\"weatherWidget\");\r\nconst weatherIcon = document.querySelector(\".weather-icon\");\r\nconst weatherTemp = document.querySelector(\".weather-temp\");\r\nconst weatherDesc = document.querySelector(\".weather-desc\");\r\nconst weatherLocation = document.querySelector(\".weather-location\");\r\nconst nextBgBtn = document.getElementById(\"nextBgBtn\");\r\nconst quickLinksEl = document.getElementById(\"quickLinks\");\r\nconst settingsPanel = document.getElementById(\"settingsPanel\");\r\n\r\nloadSettings();\r\n\r\nfunction applyTheme(): void {\r\n  document.documentElement.setAttribute(\"data-theme\", getSettings().theme || \"default\");\r\n}\r\n\r\nfunction applyBgMode(): void {\r\n  const { bgMode } = getSettings();\r\n  if (videoEl) videoEl.style.display = bgMode === \"video\" ? \"block\" : \"none\";\r\n  if (bgImageEl) {\r\n    bgImageEl.classList.toggle(\"bg-active\", bgMode === \"image\");\r\n    if (bgMode === \"image\" && !bgImageEl.classList.contains(\"bg-loaded\")) {\r\n      loadWallpapers().then(() => {\r\n        const url = getRandomImageUrl();\r\n        setBackgroundImage(bgImageEl as HTMLDivElement, url, getSettings().blurLevel || 0);\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nasync function reloadVideos(): Promise<void> {\r\n  if (!videoEl) return;\r\n  await loadVideos(videoEl);\r\n}\r\n\r\nasync function showUserVideos(): Promise<void> {\r\n  await displayUserVideos(document.getElementById(\"userVideosList\"), reloadVideos);\r\n}\r\n\r\nfunction applyFocusMode(): void {\r\n  const { focusMode, zenMode, showQuickLinks } = getSettings();\r\n  const show = !focusMode && !zenMode;\r\n  if (quoteEl) quoteEl.style.display = show ? \"block\" : \"none\";\r\n  if (weatherWidget) weatherWidget.style.display = show ? \"flex\" : \"none\";\r\n  if (quickLinksEl) quickLinksEl.style.display = show && showQuickLinks ? \"flex\" : \"none\";\r\n  if (dailyFocusEl) dailyFocusEl.style.display = show ? \"block\" : \"none\";\r\n  document.body.classList.toggle(\"zen-mode\", zenMode);\r\n}\r\n\r\nfunction playNextBg(): void {\r\n  const { bgMode } = getSettings();\r\n  if (bgMode === \"video\") {\r\n    const vs = getVideos();\r\n    if (!vs.length || !videoEl) return;\r\n    let next = (getCurrentIndex() + 1) % vs.length;\r\n    if (next === getCurrentIndex() && vs.length > 1) next = 0;\r\n    setCurrentIndex(next);\r\n    playVideo(videoEl, next);\r\n  } else {\r\n    const url = getNextImageUrl();\r\n    setBackgroundImage(bgImageEl as HTMLDivElement, url, getSettings().blurLevel || 0);\r\n  }\r\n}\r\n\r\nfunction renderQuickLinks(): void {\r\n  if (!quickLinksEl) return;\r\n  const links = getQuickLinks();\r\n  quickLinksEl.innerHTML = links\r\n    .filter((l) => l.name && l.url)\r\n    .map(\r\n      (l) =>\r\n        `<a class=\"quick-link\" href=\"${l.url}\" target=\"_blank\" rel=\"noopener\">${l.name}</a>`\r\n    )\r\n    .join(\"\");\r\n}\r\n\r\nfunction updateDailyFocus(): void {\r\n  if (dailyFocusEl) {\r\n    const f = getSettings().dailyFocus?.trim();\r\n    dailyFocusEl.textContent = f ? `‚Äî ${f} ‚Äî` : \"\";\r\n  }\r\n}\r\n\r\n(async () => {\r\n  const { bgMode, imageSource, imageRotation } = getSettings();\r\n  applyBgMode();\r\n  applyTheme();\r\n\r\n  if (bgMode === \"video\" && videoEl) {\r\n    reloadVideos().catch(console.error);\r\n    videoEl.addEventListener(\"ended\", () => {\r\n      const vs = getVideos();\r\n      if (!vs.length) return;\r\n      let next: number;\r\n      do {\r\n        next = Math.floor(Math.random() * vs.length);\r\n      } while (next === getCurrentIndex() && vs.length > 1);\r\n      setCurrentIndex(next);\r\n      playVideo(videoEl!, next);\r\n    });\r\n    videoEl.addEventListener(\"error\", () => {\r\n      const vs = getVideos();\r\n      if (vs.length > 1) {\r\n        const next = (getCurrentIndex() + 1) % vs.length;\r\n        setCurrentIndex(next);\r\n        playVideo(videoEl!, next);\r\n      }\r\n    });\r\n  } else if (bgMode === \"image\" && bgImageEl) {\r\n    await loadWallpapers();\r\n    const url = getRandomImageUrl();\r\n    setBackgroundImage(bgImageEl as HTMLDivElement, url, getSettings().blurLevel || 0);\r\n    if (imageRotation > 0) {\r\n      setInterval(() => {\r\n        const next = getNextImageUrl();\r\n        (bgImageEl as HTMLElement).style.opacity = \"0\";\r\n        setTimeout(() => {\r\n          setBackgroundImage(bgImageEl as HTMLDivElement, next, getSettings().blurLevel || 0);\r\n          (bgImageEl as HTMLElement).style.opacity = \"1\";\r\n        }, 400);\r\n      }, imageRotation * 60 * 1000);\r\n    }\r\n  }\r\n})();\r\n\r\nnextBgBtn?.addEventListener(\"click\", playNextBg);\r\n\r\nupdateTime(timeEl, dateEl, greetingEl);\r\nsetInterval(() => updateTime(timeEl, dateEl, greetingEl), 1000);\r\n\r\ninitSearch(searchInput, searchLogo);\r\nloadQuote(quoteEl).catch(console.error);\r\n\r\nconst weatherEls = {\r\n  widget: weatherWidget,\r\n  icon: weatherIcon as HTMLElement | null,\r\n  temp: weatherTemp as HTMLElement | null,\r\n  desc: weatherDesc as HTMLElement | null,\r\n  location: weatherLocation as HTMLElement | null,\r\n};\r\nloadWeather(weatherEls).catch(console.error);\r\nsetInterval(() => loadWeather(weatherEls).catch(console.error), 30 * 60 * 1000);\r\n\r\nrenderQuickLinks();\r\nupdateDailyFocus();\r\napplyFocusMode();\r\n\r\nonShortcut(\"n\", playNextBg);\r\nonShortcut(\"s\", () => {\r\n  const open = settingsPanel?.getAttribute(\"data-open\") === \"true\";\r\n  settingsPanel?.setAttribute(\"data-open\", open ? \"false\" : \"true\");\r\n  if (!open) showUserVideos().catch(console.error);\r\n});\r\ninitKeyboard();\r\n\r\ninitSettingsPanel(\r\n  {\r\n    settingsBtn: document.getElementById(\"settingsBtn\"),\r\n    settingsPanel,\r\n    closeSettings: document.getElementById(\"closeSettings\"),\r\n    toggleClock: document.getElementById(\"toggleClock\") as HTMLInputElement | null,\r\n    toggleQuote: document.getElementById(\"toggleQuote\") as HTMLInputElement | null,\r\n    toggleWeather: document.getElementById(\"toggleWeather\") as HTMLInputElement | null,\r\n    toggleQuickLinks: document.getElementById(\"toggleQuickLinks\") as HTMLInputElement | null,\r\n    toggleFocus: document.getElementById(\"toggleFocus\") as HTMLInputElement | null,\r\n    toggleZen: document.getElementById(\"toggleZen\") as HTMLInputElement | null,\r\n    toggleLocalOnly: document.getElementById(\"toggleLocalOnly\") as HTMLInputElement | null,\r\n    timeFormat: document.getElementById(\"timeFormat\") as HTMLSelectElement | null,\r\n    theme: document.getElementById(\"theme\") as HTMLSelectElement | null,\r\n    searchEngine: document.getElementById(\"searchEngine\") as HTMLSelectElement | null,\r\n    bgMode: document.getElementById(\"bgMode\") as HTMLSelectElement | null,\r\n    imageSource: document.getElementById(\"imageSource\") as HTMLSelectElement | null,\r\n    customBgUrl: document.getElementById(\"customBgUrl\") as HTMLInputElement | null,\r\n    imageRotation: document.getElementById(\"imageRotation\") as HTMLInputElement | null,\r\n    blurLevel: document.getElementById(\"blurLevel\") as HTMLInputElement | null,\r\n    userName: document.getElementById(\"userName\") as HTMLInputElement | null,\r\n    dailyFocus: document.getElementById(\"dailyFocus\") as HTMLInputElement | null,\r\n    addVideoInput: document.getElementById(\"addVideoInput\") as HTMLInputElement | null,\r\n    addVideoBtn: document.getElementById(\"addVideoBtn\"),\r\n    uploadVideoInput: document.getElementById(\"uploadVideoInput\") as HTMLInputElement | null,\r\n    userVideosList: document.getElementById(\"userVideosList\"),\r\n    uploadLabel: document.querySelector(\".upload-btn\"),\r\n    quickLinksEditor: document.getElementById(\"quickLinksEditor\"),\r\n  },\r\n  {\r\n    onUpdateTime: () => updateTime(timeEl, dateEl, greetingEl),\r\n    onLoadQuote: () => loadQuote(quoteEl).catch(console.error),\r\n    onLoadWeather: () => loadWeather(weatherEls).catch(console.error),\r\n    onReloadVideos: () => reloadVideos().catch(console.error),\r\n    onDisplayVideos: () => showUserVideos().catch(console.error),\r\n    onFocusModeChange: () => {\r\n      applyFocusMode();\r\n      updateDailyFocus();\r\n    },\r\n    onBgModeChange: applyBgMode,\r\n    onThemeChange: applyTheme,\r\n    onQuickLinksChange: renderQuickLinks,\r\n    onDailyFocusChange: updateDailyFocus,\r\n  }\r\n);\r\n"],"names":["STORAGE_KEY","defaults","settings","getSettings","loadSettings","saved","parsed","error","saveSettings","updates","REMOTE_VIDEOS_URL","DB_NAME","DB_VERSION","STORE_NAME","videos","currentIndex","getVideos","getCurrentIndex","setVideos","list","setCurrentIndex","index","getVideoUrl","videoData","loadVideos","videoEl","s","userVideos","getUserVideos","localVideos","getLocalVideos","playVideo","response","data","stored","saveUserVideos","videoList","addUserVideo","url","isValidVideoUrl","removeUserVideo","onReload","filtered","v","hasValidExtension","ext","isKnownHost","host","openDB","resolve","reject","request","event","db","saveLocalVideo","file","store","items","video","removeLocalVideo","id","WALLPAPERS_URL","PICSUM","wallpapers","currentImageIndex","loadWallpapers","r","getRandomImageUrl","imageSource","customBgUrl","idx","getNextImageUrl","setBackgroundImage","el","blur","getGreeting","hour","time","name","updateTime","timeEl","dateEl","greetingEl","now","hours","suffix","minutes","seconds","SEARCH_URLS","q","initSearch","searchInput","searchLogo","e","query","engine","FALLBACK_QUOTES","loadQuote","quoteEl","randomQuote","CACHE_KEY","CACHE_DURATION","WEATHER_ICONS","NIGHT_OVERRIDES","getWeatherIcon","condition","isDay","getWeatherCondition","code","updateWeatherUI","elements","icon","temp","desc","location","showWeatherError","loadWeather","widget","cached","position","latitude","longitude","geoUrl","addr","locationName","weatherData","cache","KEY","DEFAULT_LINKS","getQuickLinks","l","saveQuickLinks","links","toastContainer","ensureContainer","showToast","message","type","container","toast","truncate","max","displayUserVideos","listEl","html","btn","target","initCollapsible","panel","section","collapsed","renderQuickLinksEditor","onUpdate","i","input","field","arr","initSettingsPanel","callbacks","set","val","settingsPanel","open","close","bgImage","shortcuts","onShortcut","key","handler","options","initKeyboard","ctrl","bgImageEl","dailyFocusEl","weatherWidget","weatherIcon","weatherTemp","weatherDesc","weatherLocation","nextBgBtn","quickLinksEl","applyTheme","applyBgMode","bgMode","reloadVideos","showUserVideos","applyFocusMode","focusMode","zenMode","showQuickLinks","show","playNextBg","vs","next","renderQuickLinks","updateDailyFocus","f","imageRotation","weatherEls"],"mappings":"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"}